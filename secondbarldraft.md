### 新バアル仕様
旧バアルは、一つのジストに対して記述した為、容量オーバー時に、トランクファイルのパーサが上手く動かない場合があった。
そこで、インデックスファイルを設け、一つの物語に対して、ジストを設ける仕様とする。
同時に、物語本体も、テキストに近い形をそのまま残す。物語の付帯情報、タイトル名はインデックスファイルに記述する。
現状で、インデックスファイル内の、一カラムは以下の項目である。
```
index_gist
id,title,date,raw_url
xawame,＃新バアル仕様,20180205234455,raw_url
...
```

### ジストファイル中身
ジストファイルの中身は、テキストをそのまま残す事を重要視し、各章の名前、チェックの有無を表現する。
```
＊未完成章の名前
未完成章は、米印の接頭辞をつける。自動的に付加出来ると良い。改行はそのまま残す。
＃完成章の名前
完成章は、シャープの接頭辞をつける。他同じ。
```

### 編集時のインターフェイス
エディタ機能は旧バアルと同じ仕様である。パーサが主に違う。

### 行の再計
更新は常に即時行う。その為、二千行を越える場合は処理に時間がかかる。編集対象は各章である為、各章のみ再計算を行えば良い。
各章のみ再計算を行う為に、一度計算した行は保存して置く必要がある。内容も然り、これらは更新速度を早める方策である。
```
{id,line,data},{...}
```

### データの再統合
データの再統合は、各章を結合すれば良い。結合時は改行を加える。章の分割時には、章末尾の改行を削除する必要がある。
```
＃第一章あいうえを
かきくけこさしすせそ、第一章内容
＊第二章さささささ
たちつてとらりるれろ、第二章内容
```

### 曖昧処理への補足
テキスト内容をそのまま章に捉えたり、する為、不完全な形式は多々発生する。
- ＊や＃が章の冒頭に無い。この場合は、一度閉じ、再度ファイルを読み込んだ際に章が消えてしまう事になるが、内容自体は前の章として残る。これは仕様である。
- 各章のタイトルがあるのに、内容が無い。この場合は、章のタイトルのみ存在し、正常に処理をする。
- 章を消す。章を消すには、ctrl+backspaceで消える。backspaceで全て消してから、コントロールと同時にバックスペースを押すと消える。
- 編集項目のみがあり、章も内容も無い。この場合、は次回読み込み時に最後の章の末尾に改行が入る可能性はあるため、データ再統合時に、文字数が在るのかをチェックし、完全に無くす。






