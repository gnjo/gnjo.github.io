<head>
<script id="blockscript">
function codepenhack(){
 let fn={};
 fn.q=(d=>document.querySelector(d))
 fn.qa=((d,doc=document)=>[].slice.call(doc.querySelectorAll(d))) 
 fn.ce=(d=>document.createElement(d))
 fn.r=(d=>d.parentNode.removeChild(d))
 fn.i3=function(html){
  if(typeof html !=='string') return html
  var el=document.createElement('table'); el.innerHTML=html.trim();
  return el.childNodes[0];
 }
 fn.urlcnk=(u)=>{
  let cep = /.+\?/.test(u)? '&' :'?',v =`__${performance.now()}__=`.replace('.','')
  return u + cep + v + Date.now()
 }  
 ; 
 let v=''
 /*,calc=(d)=>{
  document.body.innerHTML=d;
  //script reboot;
  fn.qa('script',document.body).forEach(d=>{
   let html=d.innerHTML,src=d.src||''; fn.r(d)
   let el=fn.ce('script'); document.body.appendChild(el);
   el.innerHTML=html;el.src=src;
  })
  //
  let css=fn.i3(`<link href="${fn.urlcnk(v+'.css')}" rel="stylesheet">`)
  ,js =fn.ce('script');
  ;[css,js].forEach(d=>document.body.appendChild(d));
  js.src=fn.urlcnk(v+'.js')
 }*/
 ,calc=(d)=>{
  let body=fn.ce('body')
  body.innerHTML=d;
  //script reboot;
  fn.qa('script',body).forEach(d=>{
   let html=d.innerHTML,src=d.src||''; fn.r(d)
   let el=fn.ce('script'); body.appendChild(el);
   el.innerHTML=html;el.src=src;
  })
  //
  let css=fn.i3(`<link href="${fn.urlcnk(v+'.css')}" rel="stylesheet">`)
  ,js =fn.ce('script');
  ;[css,js].forEach(d=>body.appendChild(d));
  js.src=fn.urlcnk(v+'.js');
  //
  document.body.innerHTML=body.innerHTML;
 }
 ,init=()=>{
   let url=location.href
  ;if(/\?/.test(url)&&/=/.test(url)&&url.indexOf('codepen.io')){
   let x=url.slice(url.lastIndexOf('=')+1)
   x=(x.charAt(x.length-1)=='/')?x.slice(0,-1):x;
   v=x;
   fetch(fn.urlcnk(v+'.html')).then(d=>d.text()).then(calc)   
  }
 }  
 document.body.onkeydown=function(ev){
  if(!(ev.target === this && ev.ctrlKey && ev.keyCode===13)) return;
  let block='blockscript',name='codepenhack'
  ,el=fn.q('#'+name)||fn.i3('<input id="codepenhack" style="width: 44rem; position: fixed; margin: auto; top: 2rem;">')

  if(!fn.q('#'+name)) document.body.appendChild(el);
  else el.style.display = (el.style.display === 'none')?'initial':'none'
  el.onkeydown=function(ev){
   if(ev.keyCode !=13) return;
   if(!~el.value.indexOf('codepen.io')) return;
   v=el.value
   ;
   console.log('in',v)
   document.body.innerHTML='';
   fn.qa('script,link,style').filter(d=>(d.id!=block)).forEach(d=>fn.r(d))
   fetch(fn.urlcnk(v+'.html')).then(d=>d.text()).then(calc)
  }
 }
 ;
 init();///
} 
</script> 
</head>
<body onload="codepenhack()">
</body>
